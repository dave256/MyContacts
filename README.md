# MyContacts

Basic app demonstrating SwiftUI `NavigationStack` with editable value-types data and support for deep linking. Uses a delegation pattern (via the `ContactSaver` protocol) to save data back to the previous view model which in this case is just the app's source of truth (`AppModel` class). In practice with a sequence of view models for each view on the `NavigationStack`, each view model could save to the view model of the previous view (by having each view model store a `parentModel` for the presenting view). Each view model would save to its parent and when the parent saves changes, it would also save to its parent.

This app was designed to teach the basic concepts of SwiftUI for a course. It is not meant to be a practical app. Feel free to use it for ideas, but don't expect it to be actively maintained.

It uses some of the [PointFree](https://www.pointfree.co) ([open-source libraries](https://github.com/pointfreeco/). Their JSON collection for adding to Xcode is [here](https://swiftpackageindex.com/pointfreeco/collection.json). Some of the technqiues used were inspired by their great series on SwiftUI Navigation (episodes 160-168) for driving navigation through state vs. the "fire and forget" (their term I believe) APIs that navigate to new views but have no state for tracking it. Unfortunately Apple's `NavigationView` is a bit buggy for deep-linking more than one navigation link. And `NavigationView` is now deprecated and replaced by `NavigationStack`.

This sample app uses the new `NavigationStack` which seems to make it a little more challenging for deep-linking with data that is meant to be modified. The PointFree approach of having each view having an optional destination view doesn't seem to work well (at least not that I could figure out) for pushing a new view on the `NavigationStack` as each view is presented. I seemed to get view corruption putting one navigation destination on the `NavigationStack` path and having it then put the next destination on. It seems SwiftUI doesn't like the state being updated while a current animation of transitioning to a view is happening. And also you would need access to the previous views to change the destination to `nil` when the user taps the `NavigationStack` button at the top left to pop one screen on the `NavigationStack`.

The delegation pattern is a slightly simpler, but less general approach requring that each view's view model has a weak reference to the previous screen's view model for saving changes. In order to deep link, you need to create the sequence of view models and set the parent view model as you create them. Once you've made the various view models, you can set the `NavigationStack`'s path using them.
